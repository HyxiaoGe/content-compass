# ContentCompass - æ™ºèƒ½ç½‘é¡µå†…å®¹è§£æå¹³å°

<div align="center">

![ContentCompass Logo](https://via.placeholder.com/150x150/4F46E5/FFFFFF?text=CC)

**ä½¿ç”¨AIæŠ€æœ¯å°†ä»»æ„ç½‘é¡µå†…å®¹è½¬åŒ–ä¸ºç»“æ„åŒ–æ‘˜è¦çš„æ™ºèƒ½è§£æå¹³å°**

[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)](https://typescriptlang.org/)
[![Next.js](https://img.shields.io/badge/Next.js-000000?style=for-the-badge&logo=next.js&logoColor=white)](https://nextjs.org/)
[![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=for-the-badge&logo=supabase&logoColor=white)](https://supabase.com/)
[![OpenAI](https://img.shields.io/badge/OpenAI-412991?style=for-the-badge&logo=openai&logoColor=white)](https://openai.com/)
[![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)](https://tailwindcss.com/)

</div>

## ğŸ“– ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ç¯å¢ƒé…ç½®](#-ç¯å¢ƒé…ç½®)
- [éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—)
- [APIæ–‡æ¡£](#-apiæ–‡æ¡£)
- [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [ç»´æŠ¤æŒ‡å—](#-ç»´æŠ¤æŒ‡å—)
- [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)
- [æ€§èƒ½ä¼˜åŒ–](#-æ€§èƒ½ä¼˜åŒ–)
- [å®‰å…¨æ€§](#-å®‰å…¨æ€§)
- [æ‰©å±•åŠŸèƒ½](#-æ‰©å±•åŠŸèƒ½)
- [æ›´æ–°æ—¥å¿—](#-æ›´æ–°æ—¥å¿—)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#-è®¸å¯è¯)

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### ğŸ” æ™ºèƒ½å†…å®¹æå–
- **å…ˆè¿›çš„ç½‘é¡µè§£æ**ï¼šè‡ªåŠ¨è¯†åˆ«å¹¶æå–ç½‘é¡µæ ¸å¿ƒå†…å®¹
- **å™ªéŸ³è¿‡æ»¤**ï¼šæ™ºèƒ½è¿‡æ»¤å¹¿å‘Šã€å¯¼èˆªã€é¡µè„šç­‰æ— å…³ä¿¡æ¯
- **å¤šç§ç½‘ç«™æ”¯æŒ**ï¼šæ–°é—»ã€åšå®¢ã€å­¦æœ¯è®ºæ–‡ã€æŠ€æœ¯æ–‡æ¡£ç­‰

### ğŸ¤– AIé©±åŠ¨æ‘˜è¦
- **GPT-4é›†æˆ**ï¼šä½¿ç”¨æœ€æ–°çš„OpenAI GPT-4æ¨¡å‹
- **8ç§æ‘˜è¦ç±»å‹**ï¼šç®€è¦ã€æ ‡å‡†ã€è¯¦ç»†ã€è¦ç‚¹ã€æ´å¯Ÿã€æ‰§è¡Œã€æŠ€æœ¯ã€å­¦æœ¯
- **å¤šè¯­è¨€æ”¯æŒ**ï¼šæ”¯æŒ12ç§è¯­è¨€çš„è¾“å…¥å’Œè¾“å‡º
- **è‡ªå®šä¹‰æç¤ºè¯**ï¼šå…è®¸ç”¨æˆ·å®šåˆ¶AIå¤„ç†é€»è¾‘

### ğŸ“Š æ•°æ®ç®¡ç†
- **å†…å®¹å­˜å‚¨**ï¼šå®Œæ•´çš„å†…å®¹ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶
- **æ‰¹é‡å¤„ç†**ï¼šä¸€æ¬¡æ€§å¤„ç†å¤šä¸ªURLï¼Œæ”¯æŒå¹¶å‘
- **å¤šæ ¼å¼å¯¼å‡º**ï¼šJSONã€CSVã€Markdownã€TXTæ ¼å¼
- **å®æ—¶ç»Ÿè®¡**ï¼šè¯¦ç»†çš„ä½¿ç”¨åˆ†æå’Œæ€§èƒ½ç›‘æ§

### ğŸ” ç”¨æˆ·ç³»ç»Ÿ
- **è®¤è¯ç³»ç»Ÿ**ï¼šé‚®ç®±æ³¨å†Œ/ç™»å½• + Google OAuth
- **ç”¨æˆ·ç®¡ç†**ï¼šä¸ªäººèµ„æ–™ã€ä½¿ç”¨é…é¢ã€è®¢é˜…ç®¡ç†
- **æƒé™æ§åˆ¶**ï¼šåŸºäºRLSçš„æ•°æ®å®‰å…¨ä¿æŠ¤

### ğŸ“± ç°ä»£åŒ–ç•Œé¢
- **å“åº”å¼è®¾è®¡**ï¼šå®Œç¾é€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢è®¾å¤‡
- **å®æ—¶æ›´æ–°**ï¼šWebSocketæ”¯æŒçš„å®æ—¶çŠ¶æ€æ›´æ–°
- **åŠ è½½çŠ¶æ€**ï¼šå‹å¥½çš„åŠ è½½åŠ¨ç”»å’Œè¿›åº¦æŒ‡ç¤º
- **é”™è¯¯å¤„ç†**ï¼šå…¨é¢çš„é”™è¯¯è¾¹ç•Œå’Œç”¨æˆ·å‹å¥½æç¤º

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **æ¡†æ¶**ï¼šNext.js 15 (App Router)
- **è¯­è¨€**ï¼šTypeScript 5.x
- **æ ·å¼**ï¼šTailwind CSS 3.x
- **UIç»„ä»¶**ï¼šRadix UI + è‡ªå®šä¹‰ç»„ä»¶åº“
- **çŠ¶æ€ç®¡ç†**ï¼šReact Hooks + Server State

### åç«¯æŠ€æœ¯
- **è¿è¡Œæ—¶**ï¼šNode.js 18+
- **APIè·¯ç”±**ï¼šNext.js API Routes
- **æ•°æ®åº“**ï¼šSupabase (PostgreSQL)
- **è®¤è¯**ï¼šSupabase Auth
- **æ–‡ä»¶å­˜å‚¨**ï¼šSupabase Storage

### ç¬¬ä¸‰æ–¹æœåŠ¡
- **AIæœåŠ¡**ï¼šOpenAI GPT-4o-mini
- **ç½‘é¡µçˆ¬å–**ï¼šPuppeteer + è‡ªå®šä¹‰è§£æå™¨
- **é‚®ä»¶æœåŠ¡**ï¼šSupabase (å¯æ‰©å±•)
- **ç›‘æ§**ï¼šå†…ç½®ç›‘æ§ç³»ç»Ÿ

### å¼€å‘å·¥å…·
- **åŒ…ç®¡ç†**ï¼šnpm
- **ä»£ç è§„èŒƒ**ï¼šESLint + Prettier
- **ç±»å‹æ£€æŸ¥**ï¼šTypeScript
- **ç‰ˆæœ¬æ§åˆ¶**ï¼šGit
- **éƒ¨ç½²**ï¼šVercel (æ¨è)

## ğŸ“ é¡¹ç›®ç»“æ„

```
content-compass/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router é¡µé¢
â”‚   â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ parse/         # å†…å®¹è§£æAPI
â”‚   â”‚   â”‚   â”œâ”€â”€ content/       # å†…å®¹ç®¡ç†API
â”‚   â”‚   â”‚   â”œâ”€â”€ user/          # ç”¨æˆ·ç›¸å…³API
â”‚   â”‚   â”‚   â”œâ”€â”€ docs/          # APIæ–‡æ¡£
â”‚   â”‚   â”‚   â”œâ”€â”€ test/          # æµ‹è¯•ç«¯ç‚¹
â”‚   â”‚   â”‚   â””â”€â”€ monitoring/    # ç›‘æ§API
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ dashboard/         # ä»ªè¡¨æ¿
â”‚   â”‚   â”œâ”€â”€ content/           # å†…å®¹ç®¡ç†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ parse/             # è§£æé¡µé¢
â”‚   â”‚   â””â”€â”€ globals.css        # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ components/            # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/               # åŸºç¡€UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ layout/           # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ auth/             # è®¤è¯ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ dashboard/        # ä»ªè¡¨æ¿ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ content/          # å†…å®¹ç»„ä»¶
â”‚   â”‚   â””â”€â”€ parse/            # è§£æç»„ä»¶
â”‚   â”œâ”€â”€ lib/                  # æ ¸å¿ƒåº“æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ database/         # æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ scraper/          # ç½‘é¡µçˆ¬å–
â”‚   â”‚   â”œâ”€â”€ ai/               # AIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ supabase/         # Supabaseå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ utils.ts          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ types/                # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ database.ts       # æ•°æ®åº“ç±»å‹
â”‚   â””â”€â”€ middleware.ts         # ä¸­é—´ä»¶
â”œâ”€â”€ supabase/                 # Supabaseé…ç½®
â”‚   â”œâ”€â”€ migrations/           # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ config.toml           # Supabaseé…ç½®
â”œâ”€â”€ public/                   # é™æ€èµ„æº
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ package.json              # é¡¹ç›®é…ç½®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚
- Node.js 18+ 
- npm æˆ– yarn
- Git
- ç°ä»£æµè§ˆå™¨

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/your-username/content-compass.git
cd content-compass
```

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. ç¯å¢ƒé…ç½®
åˆ›å»º `.env.local` æ–‡ä»¶ï¼š
```bash
cp .env.example .env.local
```

é…ç½®ç¯å¢ƒå˜é‡ï¼š
```env
# Supabase é…ç½®
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# OpenAI é…ç½®
OPENAI_API_KEY=your_openai_api_key

# åº”ç”¨é…ç½®
NEXT_PUBLIC_APP_URL=http://localhost:3000
NODE_ENV=development
```

### 4. æ•°æ®åº“è®¾ç½®
```bash
# å®‰è£… Supabase CLI (å¦‚æœæœªå®‰è£…)
npm install -g @supabase/cli

# ç™»å½• Supabase
supabase login

# è¿è¡Œæ•°æ®åº“è¿ç§»
supabase db push
```

### 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

è®¿é—® http://localhost:3000 å¼€å§‹ä½¿ç”¨ï¼

## âš™ï¸ ç¯å¢ƒé…ç½®

### å¿…éœ€ç¯å¢ƒå˜é‡

| å˜é‡å | æè¿° | è·å–æ–¹å¼ |
|--------|------|----------|
| `NEXT_PUBLIC_SUPABASE_URL` | Supabaseé¡¹ç›®URL | Supabaseæ§åˆ¶å° â†’ è®¾ç½® â†’ API |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | SupabaseåŒ¿åå¯†é’¥ | Supabaseæ§åˆ¶å° â†’ è®¾ç½® â†’ API |
| `SUPABASE_SERVICE_ROLE_KEY` | SupabaseæœåŠ¡å¯†é’¥ | Supabaseæ§åˆ¶å° â†’ è®¾ç½® â†’ API |
| `OPENAI_API_KEY` | OpenAI APIå¯†é’¥ | OpenAIå¹³å° â†’ API Keys |

### å¯é€‰ç¯å¢ƒå˜é‡

| å˜é‡å | æè¿° | é»˜è®¤å€¼ |
|--------|------|--------|
| `NEXT_PUBLIC_APP_URL` | åº”ç”¨åŸºç¡€URL | `http://localhost:3000` |
| `NODE_ENV` | è¿è¡Œç¯å¢ƒ | `development` |

### Supabaseè®¾ç½®

1. **åˆ›å»ºSupabaseé¡¹ç›®**
   ```bash
   # è®¿é—® https://supabase.com
   # åˆ›å»ºæ–°é¡¹ç›®å¹¶è·å–APIå¯†é’¥
   ```

2. **é…ç½®è®¤è¯æä¾›å•†**
   ```bash
   # Supabaseæ§åˆ¶å° â†’ è®¤è¯ â†’ æä¾›å•†
   # å¯ç”¨Google OAuthï¼ˆå¯é€‰ï¼‰
   ```

3. **è®¾ç½®RLSç­–ç•¥**
   ```sql
   # æ•°æ®åº“å·²åŒ…å«å®Œæ•´çš„RLSç­–ç•¥
   # è¿è¡Œ supabase db push è‡ªåŠ¨åº”ç”¨
   ```

### OpenAIè®¾ç½®

1. **è·å–APIå¯†é’¥**
   ```bash
   # è®¿é—® https://platform.openai.com
   # åˆ›å»ºAPIå¯†é’¥å¹¶è®¾ç½®ä½¿ç”¨é™åˆ¶
   ```

2. **é…ç½®æ¨¡å‹**
   ```typescript
   // src/lib/ai/openai-service.ts
   // é»˜è®¤ä½¿ç”¨ gpt-4o-miniï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´
   ```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Verceléƒ¨ç½²ï¼ˆæ¨èï¼‰

1. **è¿æ¥GitHub**
   ```bash
   # æ¨é€ä»£ç åˆ°GitHubä»“åº“
   git push origin main
   ```

2. **å¯¼å…¥åˆ°Vercel**
   ```bash
   # è®¿é—® https://vercel.com
   # ç‚¹å‡» "New Project" â†’ å¯¼å…¥GitHubä»“åº“
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   # åœ¨Vercelé¡¹ç›®è®¾ç½®ä¸­æ·»åŠ æ‰€æœ‰ç¯å¢ƒå˜é‡
   # ç¡®ä¿NEXT_PUBLIC_APP_URLè®¾ç½®ä¸ºä½ çš„åŸŸå
   ```

4. **éƒ¨ç½²**
   ```bash
   # Vercelè‡ªåŠ¨éƒ¨ç½²ï¼Œé€šå¸¸2-3åˆ†é’Ÿå®Œæˆ
   ```

### Dockeréƒ¨ç½²

1. **æ„å»ºé•œåƒ**
   ```bash
   docker build -t content-compass .
   ```

2. **è¿è¡Œå®¹å™¨**
   ```bash
   docker run -p 3000:3000 \
     -e NEXT_PUBLIC_SUPABASE_URL=your_url \
     -e NEXT_PUBLIC_SUPABASE_ANON_KEY=your_key \
     -e SUPABASE_SERVICE_ROLE_KEY=your_service_key \
     -e OPENAI_API_KEY=your_openai_key \
     content-compass
   ```

### ä¼ ç»ŸæœåŠ¡å™¨éƒ¨ç½²

1. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**
   ```bash
   npm run build
   ```

2. **å¯åŠ¨åº”ç”¨**
   ```bash
   npm start
   ```

3. **ä½¿ç”¨PM2ç®¡ç†**
   ```bash
   npm install -g pm2
   pm2 start ecosystem.config.js
   ```

## ğŸ“š APIæ–‡æ¡£

### å†…ç½®APIæ–‡æ¡£
è®¿é—® `/api/docs` è·å–å®Œæ•´çš„APIæ–‡æ¡£ï¼ŒåŒ…æ‹¬ï¼š
- äº¤äº’å¼API explorer
- è¯·æ±‚/å“åº”ç¤ºä¾‹
- è®¤è¯è¯´æ˜
- é”™è¯¯ä»£ç å‚è€ƒ

### æ ¸å¿ƒAPIç«¯ç‚¹

#### å†…å®¹è§£æ
```http
POST /api/parse
Content-Type: application/json

{
  "url": "https://example.com/article",
  "options": {
    "summaryType": "standard",
    "language": "auto",
    "maxTokens": 1000
  }
}
```

#### å†…å®¹ç®¡ç†
```http
GET /api/content?page=1&limit=10&status=completed
GET /api/content/{id}
PUT /api/content/{id}
DELETE /api/content/{id}
PATCH /api/content/{id} # é‡æ–°ç”Ÿæˆæ‘˜è¦
```

#### æ‰¹é‡æ“ä½œ
```http
POST /api/content/batch
Content-Type: application/json

{
  "action": "parse",
  "urls": ["url1", "url2"],
  "options": {...}
}
```

#### ç”¨æˆ·ç»Ÿè®¡
```http
GET /api/user/stats?timeRange=30&detailed=true
```

#### ç³»ç»Ÿç›‘æ§
```http
GET /api/status
GET /api/monitoring
GET /api/test?type=health
```

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä»£ç ç»“æ„

#### ç»„ä»¶å¼€å‘
```typescript
// åŸºç¡€ç»„ä»¶ç»“æ„
'use client'

import { useState } from 'react'
import { Button } from '@/components/ui/button'

interface ComponentProps {
  // ç±»å‹å®šä¹‰
}

export function Component({ prop }: ComponentProps) {
  // ç»„ä»¶é€»è¾‘
  return (
    // JSX
  )
}
```

#### APIè·¯ç”±å¼€å‘
```typescript
// src/app/api/example/route.ts
import { NextRequest, NextResponse } from 'next/server'
import type { APIResponse } from '@/types/database'

export async function GET(request: NextRequest) {
  try {
    // APIé€»è¾‘
    return NextResponse.json({ success: true, data: result })
  } catch (error) {
    return NextResponse.json(
      { success: false, error: 'Error message' },
      { status: 500 }
    )
  }
}
```

#### æ•°æ®åº“æ“ä½œ
```typescript
// src/lib/database/example.ts
import { createServerComponentClient } from '@supabase/auth-helpers-nextjs'
import type { Database } from '@/types/database'

export class ExampleService {
  async getData(userId: string) {
    // æ•°æ®åº“æ“ä½œ
  }
}
```

### æœ¬åœ°å¼€å‘

#### å¯åŠ¨å¼€å‘ç¯å¢ƒ
```bash
# å¼€å‘æœåŠ¡å™¨
npm run dev

# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ ¼å¼åŒ–
npm run lint
npm run lint:fix
```

#### æ•°æ®åº“æ“ä½œ
```bash
# æŸ¥çœ‹æ•°æ®åº“çŠ¶æ€
supabase status

# é‡ç½®æ•°æ®åº“
supabase db reset

# ç”Ÿæˆç±»å‹
supabase gen types typescript --local > src/types/database.ts
```

#### æµ‹è¯•
```bash
# è¿è¡Œæµ‹è¯•ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
npm test

# å¥åº·æ£€æŸ¥
curl http://localhost:3000/api/test?type=health
```

### æ·»åŠ æ–°åŠŸèƒ½

#### 1. æ•°æ®åº“æ›´æ”¹
```sql
-- supabase/migrations/new_feature.sql
CREATE TABLE new_table (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  -- å…¶ä»–å­—æ®µ
);
```

#### 2. ç±»å‹å®šä¹‰
```typescript
// src/types/database.ts
export interface NewTable {
  id: string
  // å…¶ä»–å­—æ®µç±»å‹
}
```

#### 3. æœåŠ¡å±‚
```typescript
// src/lib/database/new-service.ts
export class NewService {
  // ä¸šåŠ¡é€»è¾‘
}
```

#### 4. APIè·¯ç”±
```typescript
// src/app/api/new-feature/route.ts
export async function GET() {
  // APIå®ç°
}
```

#### 5. å‰ç«¯ç»„ä»¶
```typescript
// src/components/new-feature/component.tsx
export function NewFeatureComponent() {
  // ç»„ä»¶å®ç°
}
```

## ğŸ”§ ç»´æŠ¤æŒ‡å—

### æ—¥å¸¸ç»´æŠ¤

#### 1. ç›‘æ§æ£€æŸ¥
```bash
# ç³»ç»ŸçŠ¶æ€
curl https://your-domain.com/api/status

# æ€§èƒ½ç›‘æ§
curl https://your-domain.com/api/monitoring

# å¥åº·æ£€æŸ¥
curl https://your-domain.com/api/test?type=health&detailed=true
```

#### 2. æ•°æ®åº“ç»´æŠ¤
```sql
-- æŸ¥çœ‹æ•°æ®åº“å¤§å°
SELECT 
  schemaname,
  tablename,
  pg_size_pretty(pg_total_relation_size(tablename::text)) as size
FROM pg_tables 
WHERE schemaname = 'public';

-- æ¸…ç†æ—§æ•°æ®ï¼ˆæ ¹æ®éœ€è¦ï¼‰
DELETE FROM parsed_content 
WHERE created_at < NOW() - INTERVAL '90 days' 
AND status = 'failed';
```

#### 3. æ—¥å¿—åˆ†æ
```bash
# Vercelæ—¥å¿—
vercel logs

# åº”ç”¨é”™è¯¯ç›‘æ§
# æ£€æŸ¥ /api/monitoring ç«¯ç‚¹
```

### æ€§èƒ½ä¼˜åŒ–

#### 1. æ•°æ®åº“ä¼˜åŒ–
```sql
-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_parsed_content_user_created 
ON parsed_content(user_id, created_at DESC);

CREATE INDEX idx_parsed_content_status 
ON parsed_content(status) WHERE status != 'completed';

-- åˆ†ææŸ¥è¯¢æ€§èƒ½
EXPLAIN ANALYZE SELECT * FROM parsed_content 
WHERE user_id = $1 ORDER BY created_at DESC LIMIT 10;
```

#### 2. ç¼“å­˜ç­–ç•¥
```typescript
// æ·»åŠ Redisç¼“å­˜ï¼ˆå¯é€‰ï¼‰
import Redis from 'ioredis'

const redis = new Redis(process.env.REDIS_URL)

// ç¼“å­˜ç”¨æˆ·ç»Ÿè®¡
const cacheKey = `user_stats:${userId}`
const cached = await redis.get(cacheKey)
if (cached) return JSON.parse(cached)

// è®¾ç½®ç¼“å­˜
await redis.setex(cacheKey, 300, JSON.stringify(stats))
```

#### 3. APIé™æµ
```typescript
// å®ç°rate limiting
import { Ratelimit } from '@upstash/ratelimit'

const ratelimit = new Ratelimit({
  redis,
  limiter: Ratelimit.slidingWindow(10, '1 m'),
})

export async function POST(request: NextRequest) {
  const ip = request.ip || 'anonymous'
  const { success } = await ratelimit.limit(ip)
  
  if (!success) {
    return NextResponse.json(
      { error: 'Too many requests' },
      { status: 429 }
    )
  }
  
  // ç»§ç»­å¤„ç†è¯·æ±‚
}
```

### æ›´æ–°å’Œå‡çº§

#### 1. ä¾èµ–æ›´æ–°
```bash
# æ£€æŸ¥è¿‡æœŸä¾èµ–
npm outdated

# æ›´æ–°ä¾èµ–
npm update

# ä¸»è¦ç‰ˆæœ¬å‡çº§
npm install package@latest
```

#### 2. Next.jså‡çº§
```bash
# å‡çº§Next.js
npm install next@latest react@latest react-dom@latest

# æ£€æŸ¥breaking changes
npx @next/codemod@latest
```

#### 3. æ•°æ®åº“è¿ç§»
```bash
# åˆ›å»ºæ–°è¿ç§»
supabase migration new migration_name

# åº”ç”¨è¿ç§»
supabase db push

# å›æ»šè¿ç§»ï¼ˆå¦‚æœéœ€è¦ï¼‰
supabase db reset
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç¯å¢ƒå˜é‡é—®é¢˜
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $NEXT_PUBLIC_SUPABASE_URL
echo $OPENAI_API_KEY

# éªŒè¯Supabaseè¿æ¥
npm run test:supabase
```

#### 2. æ•°æ®åº“è¿æ¥é—®é¢˜
```typescript
// æµ‹è¯•æ•°æ®åº“è¿æ¥
const { data, error } = await supabase
  .from('user_profiles')
  .select('count', { count: 'exact' })
  .limit(1)

if (error) {
  console.error('Database connection failed:', error)
}
```

#### 3. OpenAI APIé—®é¢˜
```bash
# æµ‹è¯•OpenAIè¿æ¥
curl https://api.openai.com/v1/models \
  -H "Authorization: Bearer $OPENAI_API_KEY"
```

#### 4. éƒ¨ç½²é—®é¢˜
```bash
# æ£€æŸ¥æ„å»ºæ—¥å¿—
npm run build 2>&1 | tee build.log

# éªŒè¯ç”Ÿäº§æ„å»º
npm run start
```

### é”™è¯¯ä»£ç å‚è€ƒ

| é”™è¯¯ä»£ç  | æè¿° | è§£å†³æ–¹æ¡ˆ |
|----------|------|----------|
| 401 | ç”¨æˆ·æœªè®¤è¯ | æ£€æŸ¥è®¤è¯çŠ¶æ€ï¼Œé‡æ–°ç™»å½• |
| 403 | æƒé™ä¸è¶³ | éªŒè¯ç”¨æˆ·æƒé™ï¼Œæ£€æŸ¥RLSç­–ç•¥ |
| 429 | è¯·æ±‚è¿‡å¤š | å®ç°ç‡é™åˆ¶ï¼Œæ£€æŸ¥APIé…é¢ |
| 500 | æœåŠ¡å™¨é”™è¯¯ | æ£€æŸ¥æ—¥å¿—ï¼ŒéªŒè¯ç¯å¢ƒé…ç½® |

### æ—¥å¿—åˆ†æ

#### 1. åº”ç”¨æ—¥å¿—
```typescript
// ç»“æ„åŒ–æ—¥å¿—
console.log(JSON.stringify({
  level: 'error',
  message: 'API request failed',
  userId,
  error: error.message,
  timestamp: new Date().toISOString()
}))
```

#### 2. æ€§èƒ½ç›‘æ§
```typescript
// æ€§èƒ½è¿½è¸ª
const startTime = Date.now()
// ... æ“ä½œ
const duration = Date.now() - startTime
console.log(`Operation took ${duration}ms`)
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–

#### 1. ä»£ç åˆ†å‰²
```typescript
// åŠ¨æ€å¯¼å…¥
import dynamic from 'next/dynamic'

const HeavyComponent = dynamic(() => import('./HeavyComponent'), {
  loading: () => <p>Loading...</p>,
  ssr: false
})
```

#### 2. å›¾ç‰‡ä¼˜åŒ–
```typescript
import Image from 'next/image'

<Image
  src="/image.jpg"
  alt="Description"
  width={800}
  height={600}
  priority // å¯¹äºé¦–å±å›¾ç‰‡
  placeholder="blur" // æ¨¡ç³Šå ä½ç¬¦
/>
```

#### 3. ç¼“å­˜ç­–ç•¥
```typescript
// APIç¼“å­˜
const response = await fetch('/api/data', {
  next: { revalidate: 60 } // 60ç§’ç¼“å­˜
})

// é™æ€ç”Ÿæˆ
export const revalidate = 3600 // 1å°æ—¶é‡æ–°éªŒè¯
```

### åç«¯ä¼˜åŒ–

#### 1. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
```sql
-- ä½¿ç”¨åˆé€‚çš„ç´¢å¼•
CREATE INDEX CONCURRENTLY idx_content_user_status 
ON parsed_content(user_id, status, created_at DESC);

-- æŸ¥è¯¢ä¼˜åŒ–
SELECT id, title, status, created_at 
FROM parsed_content 
WHERE user_id = $1 AND status = 'completed'
ORDER BY created_at DESC 
LIMIT 20;
```

#### 2. APIå“åº”ä¼˜åŒ–
```typescript
// åˆ†é¡µæŸ¥è¯¢
const { from, to } = getPaginationRange(page, limit)
const { data, error, count } = await supabase
  .from('parsed_content')
  .select('*', { count: 'exact' })
  .range(from, to)

// å­—æ®µé€‰æ‹©
const { data } = await supabase
  .from('parsed_content')
  .select('id, title, status, created_at') // åªé€‰æ‹©éœ€è¦çš„å­—æ®µ
```

#### 3. å¹¶å‘å¤„ç†
```typescript
// æ‰¹é‡æ“ä½œä¼˜åŒ–
const batchSize = 5
const batches = chunk(urls, batchSize)

for (const batch of batches) {
  await Promise.all(
    batch.map(url => processUrl(url))
  )
}
```

## ğŸ”’ å®‰å…¨æ€§

### è®¤è¯å’Œæˆæƒ

#### 1. RLSç­–ç•¥
```sql
-- ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
CREATE POLICY "Users can only access their own content" 
ON parsed_content FOR ALL 
USING (auth.uid() = user_id);

-- ç®¡ç†å‘˜å¯ä»¥è®¿é—®æ‰€æœ‰æ•°æ®
CREATE POLICY "Admins can access all content" 
ON parsed_content FOR ALL 
USING (
  EXISTS (
    SELECT 1 FROM user_profiles 
    WHERE id = auth.uid() AND role = 'admin'
  )
);
```

#### 2. APIå®‰å…¨
```typescript
// è¾“å…¥éªŒè¯
import { z } from 'zod'

const schema = z.object({
  url: z.string().url(),
  options: z.object({
    summaryType: z.enum(['brief', 'standard', 'detailed']),
    maxTokens: z.number().min(100).max(4000)
  })
})

const validationResult = schema.safeParse(body)
if (!validationResult.success) {
  return NextResponse.json(
    { error: 'Invalid input' },
    { status: 400 }
  )
}
```

#### 3. æ•æ„Ÿæ•°æ®ä¿æŠ¤
```typescript
// ç¯å¢ƒå˜é‡éªŒè¯
const requiredEnvVars = [
  'NEXT_PUBLIC_SUPABASE_URL',
  'SUPABASE_SERVICE_ROLE_KEY',
  'OPENAI_API_KEY'
]

requiredEnvVars.forEach(envVar => {
  if (!process.env[envVar]) {
    throw new Error(`Missing required environment variable: ${envVar}`)
  }
})

// APIå¯†é’¥ä¿æŠ¤
const apiKey = process.env.OPENAI_API_KEY
if (!apiKey || !apiKey.startsWith('sk-')) {
  throw new Error('Invalid OpenAI API key')
}
```

### æ•°æ®ä¿æŠ¤

#### 1. æ•°æ®åŠ å¯†
```sql
-- ä½¿ç”¨Supabaseå†…ç½®åŠ å¯†
SELECT vault.create_secret('encryption_key', 'your-secret-key');

-- åŠ å¯†æ•æ„Ÿå­—æ®µï¼ˆå¦‚æœéœ€è¦ï¼‰
CREATE OR REPLACE FUNCTION encrypt_sensitive_data(data text)
RETURNS text AS $$
BEGIN
  RETURN vault.encrypt(data, 'encryption_key');
END;
$$ LANGUAGE plpgsql;
```

#### 2. å®¡è®¡æ—¥å¿—
```typescript
// è®°å½•é‡è¦æ“ä½œ
async function auditLog(action: string, userId: string, details: any) {
  await supabase.from('audit_logs').insert({
    action,
    user_id: userId,
    details,
    ip_address: request.ip,
    user_agent: request.headers.get('user-agent'),
    created_at: new Date().toISOString()
  })
}
```

## ğŸš€ æ‰©å±•åŠŸèƒ½

### æ·»åŠ æ–°çš„AIæä¾›å•†

#### 1. åˆ›å»ºæœåŠ¡ç±»
```typescript
// src/lib/ai/anthropic-service.ts
export class AnthropicService {
  async generateSummary(content: string, options: SummaryOptions) {
    // Anthropic APIå®ç°
  }
}
```

#### 2. æ›´æ–°AIç®¡ç†å™¨
```typescript
// src/lib/ai/ai-service-manager.ts
import { AnthropicService } from './anthropic-service'

export class AIServiceManager {
  private services = {
    openai: new OpenAIService(),
    anthropic: new AnthropicService()
  }

  async generateSummary(content: string, options: SummaryOptions) {
    const service = this.services[options.provider || 'openai']
    return await service.generateSummary(content, options)
  }
}
```

### æ·»åŠ æ–°çš„è¾“å‡ºæ ¼å¼

#### 1. æ‰©å±•å¯¼å‡ºæœåŠ¡
```typescript
// src/lib/export/export-service.ts
export class ExportService {
  async exportToPDF(content: ParsedContent[]): Promise<Buffer> {
    // PDFç”Ÿæˆé€»è¾‘
  }

  async exportToWord(content: ParsedContent[]): Promise<Buffer> {
    // Wordæ–‡æ¡£ç”Ÿæˆé€»è¾‘
  }
}
```

#### 2. æ›´æ–°API
```typescript
// src/app/api/content/export/route.ts
const format = validationResult.data.format

switch (format) {
  case 'pdf':
    return await exportService.exportToPDF(contents)
  case 'word':
    return await exportService.exportToWord(contents)
  // å…¶ä»–æ ¼å¼
}
```

### æ·»åŠ å®æ—¶åŠŸèƒ½

#### 1. WebSocketæ”¯æŒ
```typescript
// src/lib/websocket/socket-manager.ts
export class SocketManager {
  async broadcastUpdate(userId: string, data: any) {
    // å®æ—¶æ›´æ–°é€»è¾‘
  }
}
```

#### 2. å®æ—¶ç»„ä»¶
```typescript
// src/components/realtime/live-updates.tsx
'use client'

import { useEffect, useState } from 'react'
import { createClientComponentClient } from '@supabase/auth-helpers-nextjs'

export function LiveUpdates() {
  const supabase = createClientComponentClient()
  
  useEffect(() => {
    const channel = supabase
      .channel('content-updates')
      .on('postgres_changes', {
        event: '*',
        schema: 'public',
        table: 'parsed_content'
      }, (payload) => {
        // å¤„ç†å®æ—¶æ›´æ–°
      })
      .subscribe()

    return () => {
      supabase.removeChannel(channel)
    }
  }, [])

  return <div>Live Updates Component</div>
}
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-01-01)
- âœ¨ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- ğŸš€ åŸºç¡€å†…å®¹è§£æåŠŸèƒ½
- ğŸ” ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- ğŸ“Š ä»ªè¡¨æ¿ç•Œé¢
- ğŸ¤– AIæ‘˜è¦ç”Ÿæˆ
- ğŸ“± å“åº”å¼è®¾è®¡

### è®¡åˆ’åŠŸèƒ½
- [ ] å¤šè¯­è¨€ç•Œé¢æ”¯æŒ
- [ ] ç§»åŠ¨ç«¯åº”ç”¨
- [ ] å›¢é˜Ÿåä½œåŠŸèƒ½
- [ ] é«˜çº§åˆ†æå·¥å…·
- [ ] APIé™æµå’Œé…é¢ç®¡ç†
- [ ] ä¼ä¸šçº§é›†æˆ

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹

1. **Forké¡¹ç›®**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯** (`git checkout -b feature/AmazingFeature`)
3. **æäº¤æ›´æ”¹** (`git commit -m 'Add some AmazingFeature'`)
4. **æ¨é€åˆ†æ”¯** (`git push origin feature/AmazingFeature`)
5. **åˆ›å»ºPull Request**

### ä»£ç è§„èŒƒ

- ä½¿ç”¨TypeScriptè¿›è¡Œç±»å‹å®‰å…¨
- éµå¾ªESLintå’ŒPrettieré…ç½®
- ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
- æ›´æ–°ç›¸å…³æ–‡æ¡£

### æäº¤ä¿¡æ¯æ ¼å¼
```
ç±»å‹(ä½œç”¨åŸŸ): æè¿°

è¯¦ç»†è¯´æ˜ï¼ˆå¯é€‰ï¼‰

ç±»å‹: feat, fix, docs, style, refactor, test, chore
ä½œç”¨åŸŸ: api, ui, auth, database, etc.
```

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) è®¸å¯è¯ã€‚

## ğŸ™ è‡´è°¢

- [Next.js](https://nextjs.org/) - Reactæ¡†æ¶
- [Supabase](https://supabase.com/) - åç«¯å³æœåŠ¡
- [OpenAI](https://openai.com/) - AIæœåŠ¡
- [Tailwind CSS](https://tailwindcss.com/) - CSSæ¡†æ¶
- [Radix UI](https://www.radix-ui.com/) - UIç»„ä»¶åº“

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼š

- ğŸ“§ é‚®ç®±ï¼šsupport@contentcompass.com
- ğŸ’¬ GitHub Issuesï¼š[æäº¤é—®é¢˜](https://github.com/your-username/content-compass/issues)
- ğŸ“š æ–‡æ¡£ï¼š[åœ¨çº¿æ–‡æ¡£](https://docs.contentcompass.com)
- ğŸŒ å®˜ç½‘ï¼š[ContentCompass](https://contentcompass.com)

---

<div align="center">

**[â¬† å›åˆ°é¡¶éƒ¨](#contentcompass---æ™ºèƒ½ç½‘é¡µå†…å®¹è§£æå¹³å°)**

Made with â¤ï¸ by the ContentCompass team

</div>
